# Quickstart Guide - Phase 2 Advanced Features Development

**Last Updated**: 2026-01-01
**For**: Developers implementing the 13 advanced features

## Prerequisites

- Phase 2 basic implementation complete (authentication, basic tasks CRUD)
- Node.js 18+ and Python 3.12+ installed
- Neon PostgreSQL database running
- Git repository cloned

## Development Setup

### 1. Install Dependencies

**Backend**:
```bash
cd phase-2/backend
pip install cron-validator
# All other deps already in requirements.txt
```

**Frontend**:
```bash
cd phase-2/frontend
npm install date-fns chart.js react-chartjs-2 react-hotkeys-hook papaparse @headlessui/react
```

### 2. Run Database Migration

```bash
cd phase-2/backend
python migrate.py
# This will run specs/1-phase2-advanced-features/data-model.md migration
```

Verify migration success:
```sql
-- Connect to Neon DB and check:
\d tasks -- Should show new columns
\dt -- Should show task_history, user_preferences, tags, notifications
```

### 3. Start Development Servers

**Backend** (terminal 1):
```bash
cd phase-2/backend
uvicorn main:app --reload --port 8000
```

**Frontend** (terminal 2):
```bash
cd phase-2/frontend
npm run dev
```

Open browser: `http://localhost:3000`

---

## Development Workflow

### Implementing a Feature

1. **Pick a user story** from `spec.md` (start with P1)
2. **Read the plan** in `plan.md` for technical approach
3. **Check contracts** in `contracts/api-summary.md` for API spec
4. **Backend first**: Implement endpoint in `routes/`
5. **Test endpoint**: Use `curl` or Postman
6. **Frontend next**: Create component, call API via `lib/api.ts`
7. **Test UI**: Verify in browser

### Example: Implementing "Due Dates"

**Backend** (`routes/tasks.py`):
```python
@router.put("/{user_id}/tasks/{task_id}/due-date")
async def update_due_date(
    user_id: str,
    task_id: int,
    due_date: datetime,
    session: Session = Depends(get_session),
    current_user: dict = Depends(verify_token)
):
    task = session.get(Task, task_id)
    if not task or task.user_id != user_id:
        raise HTTPException(404, "Task not found")

    task.due_date = due_date
    session.add(task)
    session.commit()
    return {"id": task_id, "due_date": due_date}
```

**Frontend** (`lib/api.ts`):
```typescript
export async function updateTaskDueDate(taskId: number, dueDate: Date) {
  const response = await apiClient.put(
    `/api/${userId}/tasks/${taskId}/due-date`,
    { due_date: dueDate.toISOString() }
  );
  return response.data;
}
```

**Component** (`components/DatePicker.tsx`):
```tsx
import { Calendar } from "@/components/ui/calendar";

export function DatePicker({ value, onChange }) {
  return (
    <Calendar
      selected={value}
      onSelect={onChange}
      disabled={(date) => date < new Date()} // No past dates
    />
  );
}
```

---

## Testing

### Manual Testing Checklist

For each feature, test:
- âœ… Happy path (expected use case)
- âœ… Edge cases (empty input, max values)
- âœ… Error handling (invalid input, network failure)
- âœ… User isolation (can't see other users' data)

### Backend Testing

```bash
cd phase-2/backend
pytest tests/ -v
```

### Frontend Testing

```bash
cd phase-2/frontend
npm test
```

### E2E Testing

Test keyboard shortcuts manually:
1. Press `n` â†’ Task form opens
2. Press `Ctrl+E` â†’ Export modal opens
3. Press `/` â†’ Search bar focused
4. Press `?` â†’ Shortcuts help modal opens

---

## Common Issues & Solutions

### Issue: "Module not found: cron-validator"
**Solution**: Install missing dependency
```bash
pip install cron-validator
```

### Issue: "search_vector column doesn't exist"
**Solution**: Re-run migration
```bash
python migrate.py --force
```

### Issue: "CORS error in browser"
**Solution**: Check backend CORS settings
```python
# main.py
CORS_ORIGINS = ["http://localhost:3000"]
```

### Issue: "Notification permission denied"
**Solution**: User must grant permission
```typescript
await Notification.requestPermission();
```

---

## Code Generation with Claude Code

All code should be generated by Claude Code following spec-driven workflow:

```bash
# 1. Read the spec
claude-code read specs/1-phase2-advanced-features/spec.md

# 2. Generate implementation
claude-code implement "User Story 1: Task Organization with Due Dates"

# 3. Verify against acceptance criteria
claude-code test "acceptance scenarios from spec"
```

---

## Debugging Tips

### Backend Debugging
```python
# Add logging
import logging
logging.basicConfig(level=logging.DEBUG)
logger = logging.getLogger(__name__)

logger.debug(f"Task: {task}")
```

### Frontend Debugging
```typescript
// Add console logs
console.log("Task data:", task);

// Use React DevTools
// Install: chrome.google.com/webstore â†’ React Developer Tools
```

### Database Debugging
```sql
-- Check task with search_vector
SELECT id, title, search_vector FROM tasks WHERE user_id = 'user_abc123';

-- Check tag usage
SELECT name, usage_count FROM tags WHERE user_id = 'user_abc123' ORDER BY usage_count DESC;
```

---

## Performance Monitoring

### Backend
```python
import time

start = time.time()
# ... code ...
print(f"Took {(time.time() - start) * 1000}ms")
```

### Frontend
```typescript
console.time("Search");
await searchTasks(query);
console.timeEnd("Search"); // "Search: 123ms"
```

---

## Deployment Checklist

Before deploying to production:

- [ ] All migrations run successfully
- [ ] Environment variables set (NEXT_PUBLIC_API_URL, DATABASE_URL, JWT_SECRET)
- [ ] CORS configured for production frontend URL
- [ ] No console.log or debug statements in production code
- [ ] All acceptance criteria pass
- [ ] Demo video recorded (max 90 seconds)

---

## Resource Links

- **Neon Dashboard**: https://console.neon.tech
- **Vercel Dashboard**: https://vercel.com/dashboard
- **HF Spaces**: https://huggingface.co/spaces
- **shadcn/ui Docs**: https://ui.shadcn.com
- **Chart.js Docs**: https://www.chartjs.org/docs
- **FastAPI Docs**: https://fastapi.tiangolo.com

---

## Getting Help

1. Check `spec.md` for requirements
2. Check `plan.md` for technical approach
3. Check `contracts/api-summary.md` for API details
4. Check `data-model.md` for database schema
5. Ask Claude Code: "Implement [feature] following the spec"

---

**Happy coding! ðŸš€**
